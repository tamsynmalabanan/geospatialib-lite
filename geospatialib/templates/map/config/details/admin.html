<div>
    <h6 class="{{label_class}}">
        <span>Title</span>
        {% if role >= 3 %}
            <button 
                class="btn btn-sm btn-secondary badge"
                hx-get="{% url 'hx_map:edit_map' pk=map.pk form='admin' %}"
                hx-trigger="click"
                hx-target="#mapDetails"
                hx-swap="outerHTML"
            >Edit</button>
        {% endif %}
    </h6>
    <h4>{{map.content.label}}</h4>
</div>

<div>
    <h6 class="{{label_class}}">Focus Area</h6>
    {% if map.focus_area %}
        <h6 class='fw-normal'>{{map.focus_area}}</h6>
    {% endif %}
</div>

<div>
    <h6 class="{{label_class}}">Abstract</h6>
    {% if map.content.abstract %}
        <div class='fw-normal m-0 text-justify'>{{map.content.abstract|safe|linebreaks|escape}}</div>
    {% endif %}
</div>

<div>
    <h6 class="{{label_class}}">Tags</h6>
    <div class="d-flex gap-2 pt-1">
        {% for tag in map.content.tags.all %}
            <span class="badge rounded-pill text-bg-primary">
                {{tag}}
            </span>
        {% endfor %}
    </div>
</div>

<div>
    <h6 class="{{label_class}}">References</h6>
    <ul class="list-unstyled">
        {% for reference in map.references.all %}
            <li>
                <a href="{{reference.url.url}}" target="_blank" rel="noopener noreferrer">
                    {{reference.label}}
                </a>
            </li>
        {% endfor %}
    </ul>
</div>

<script>
    if (document.readyState === 'complete') {
        handleMapFocusAreaBbox("{{map.content.bbox.extent}}")
    } else {
        document.addEventListener('DOMContentLoaded', () => {
            handleMapFocusAreaBbox("{{map.content.bbox.extent}}")
        })
    }
</script>