{% load static %}

{% if page_obj.number == 1 %}
    {% include "library/search/filters.html" %}
{% endif %}

<div id='searchResults'>
    {% if page_obj.number %}
        {% if page_obj.number == 1 %}
            <ul class="list-group border-top rounded-0 pt-3">
                {% include "library/search/items.html" %}
            </ul>
            <script>
                if (document.readyState === 'complete') {
                    searchResultsScrollTop()
                    clearAllLayers(mapQuerySelector('#geospatialibMap'))
                }
            </script>
        {% else %}
            {% include "library/search/items.html" %}
        {% endif %}
    {% else %}
        {% if request.GET.query %}
            <div
                hx-get="{% url 'hx_library:search' %}?{% for key, value in request.GET.items %}{% if key != 'page' %}{{key}}={{value}}&{% endif %}{% endfor %}"
                hx-trigger='load'
                hx-target='#searchResults'
                hx-swap='outerHTML'
                hx-indicator='.htmx-indicator-search-results-load'
            ></div>
            <div class="d-flex justify-content-center gap-3">
                {% for i in '123' %}
                    <div class="spinner-grow spinner-grow-sm text-primary my-3 htmx-indicator htmx-indicator-search-results-load" role="status"></div>
                {% endfor %}
            </div>

    
        {% else %}
            fetch default filters
        {% endif %}
    {% endif %}
</div>